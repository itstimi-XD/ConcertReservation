# **성능 지표 분석 및 시스템 병목 탐색 및 개선 보고서**

## **1. 서론**

이번 성능 테스트를 통해 시스템의 다양한 성능 지표를 수집하였으며, 이를 분석하여 시스템 내의 병목 현상을 탐색하고 개선 방안을 제시하고자 합니다. 또한, 가상의 장애 상황에 대한 대응 문서를 작성하여 향후 유사한 상황에 대비하고자 합니다.

---

## **2. 성능 지표 분석**

### **2.1 테스트 결과 요약**

- **총 테스트 시간**: 7분 0.6초
- **완료된 요청 수**: 272,779회
- **평균 처리율**: 648.62 RPS (Requests Per Second)
- **동시 사용자 수(VUs)**: 최대 1,000명

### **2.2 주요 성능 지표 분석**

#### **2.2.1 HTTP 요청 관련 지표**

- **HTTP 요청 성공률**:
    - `status is 200`: 100% (모든 요청이 성공적으로 처리됨)
    - `http_req_failed`: 0.00% (272,779회 중 0회 실패)

- **HTTP 요청 시간(`http_req_duration`)**:
    - **평균 시간(avg)**: 1.08ms
    - **최소 시간(min)**: 137µs
    - **중앙값(med)**: 322µs
    - **최대 시간(max)**: 342.26ms
    - **90번째 백분위수(p(90))**: 1.18ms
    - **95번째 백분위수(p(95))**: 2.67ms

- **HTTP 대기 시간(`http_req_waiting`)**:
    - **평균 시간(avg)**: 880.49µs
    - **최소 시간(min)**: 106µs
    - **중앙값(med)**: 277µs
    - **최대 시간(max)**: 328.26ms
    - **90번째 백분위수(p(90))**: 992µs
    - **95번째 백분위수(p(95))**: 2.22ms

#### **2.2.2 기타 지표**

- **데이터 수신량**: 40 MB (평균 94 kB/s)
- **데이터 전송량**: 41 MB (평균 98 kB/s)
- **체크 포인트 성공률(`checks`)**: 99.99% (545,549회 중 545,558회 성공)

---

## **3. 시스템 병목 현상 탐색**

### **3.1 응답 시간 분포 분석**

- **평균 응답 시간**이 1.08ms로 매우 양호하지만, **최대 응답 시간**이 342.26ms로 관측되었습니다.
- **90번째 백분위수(p(90))**가 1.18ms, **95번째 백분위수(p(95))**가 2.67ms로, 상위 5~10%의 요청에서 응답 시간이 상대적으로 길어짐을 알 수 있습니다.
- 일부 요청에서 **응답 시간의 급증(최대 342.26ms)** 현상이 발생하였으며, 이는 시스템의 병목 또는 일시적인 부하로 인한 것으로 판단됩니다.

### **3.2 에러 발생 분석**

- `transaction time OK` 체크에서 99%의 성공률을 보였으며, 272,779회 중 9회의 실패가 발생하였습니다.
- 이는 전체 요청 대비 매우 낮은 비율이지만, 실패 원인을 분석하여 개선할 필요가 있습니다. 하지만 이정도면 전 뿌듯합니다 :-)

### **3.3 리소스 사용량 분석**

- **CPU 및 메모리 사용량**: 제공된 데이터에는 직접적인 리소스 사용량 정보가 없지만, 응답 시간의 변동으로 미루어 볼 때 특정 시점에 리소스 사용률이 높아졌을 가능성이 있습니다.
- **네트워크 대역폭**: 데이터 전송 및 수신량이 비교적 안정적으로 유지되었으며, 네트워크 병목은 아닌 것으로 판단됩니다.

---

## **4. 개선 방안 제시**

### **4.1 응답 시간 개선**

- **애플리케이션 최적화**:
    - 코드 최적화를 통해 처리 시간을 단축합니다.
    - 비효율적인 알고리즘이나 불필요한 연산을 제거합니다.
- **데이터베이스 튜닝**:
    - 쿼리 최적화 및 인덱싱을 통해 데이터베이스 응답 시간을 개선합니다.
    - 캐싱 전략을 도입하여 자주 조회되는 데이터를 메모리에 저장합니다.

### **4.2 에러 발생 원인 파악 및 대응**

- **로그 분석**:
    - 실패한 요청의 로그를 분석하여 에러 원인을 파악합니다.
- **예외 처리 강화**:
    - 예외 상황에 대한 처리 로직을 개선하여 실패를 최소화합니다.

### **4.3 시스템 자원 확충 및 부하 분산**

- **로드 밸런싱 도입**:
    - 로드 밸런서를 통해 요청을 고르게 분산시켜 특정 서버에 부하가 집중되는 것을 방지합니다.

---

## **5. (가상) 장애 대응 문서**

### **5.1 장애 개요**

- **발생 일시**: YYYY-MM-DD HH:MM
- **장애 유형**: 응답 시간 지연 및 일부 요청 실패 발생
- **영향 범위**: 전체 사용자 중 약 0.003%가 서비스 지연 또는 실패 경험(상당히 유감..)

### **5.2 장애 원인**

- **일시적인 서버 부하로 인한 응답 시간 지연**
- **특정 시점에 리소스 사용량 급증으로 인한 일부 요청 처리 실패**

### **5.3 조치 사항**

1. **즉각적인 대응**

    - 모니터링 시스템의 알람을 수신하고 문제 발생을 인지
    - 장애 발생 서버의 상태 확인 및 필요한 경우 재기동
    - 트래픽을 다른 서버로 우회하여 부하 분산

2. **원인 분석**

    - 로그 및 메트릭 데이터를 수집하여 장애 원인 파악
    - 해당 시간대의 리소스 사용량 및 요청 패턴 분석

3. **근본적인 해결책 마련**

    - 애플리케이션 최적화를 통해 응답 시간 개선
    - 서버 자동 스케일링 설정
    - 로드 밸런싱 정책 개선

### **5.4 재발 방지 대책**

- **모니터링 강화**:

    - 실시간 모니터링 시스템을 개선하여 이상 징후를 조기에 탐지
    - 주요 성능 지표에 대한 알람 임계값 재조정

- **부하 테스트 주기적 실시**:

    - 정기적인 부하 테스트를 통해 시스템의 한계점 파악 및 대비
    - 시나리오별 테스트를 통해 다양한 상황에 대비

- **인프라 개선**:

    - 자동 스케일링 기능을 도입하여 부하에 따라 자원을 유연하게 관리
    - 고가용성(HA) 아키텍처 구축으로 장애 발생 시 서비스 연속성 확보

---

## **6. 결론**

이번 성능 테스트를 통해 시스템의 전반적인 성능은 양호하나, 일부 요청에서 응답 시간이 길어지고 요청 실패가 발생하는 문제점을 발견하였습니다. 이러한 현상을 개선하기 위해 애플리케이션 최적화, 리소스 확충, 모니터링 시스템 강화 등의 방안을 제시하였으며, 가상의 장애 대응 문서를 작성하여 향후 유사한 상황에 대비할 수 있도록 하였습니다.

---

## **7.. 향후 계획**

-  그라파냐가 p90 이런 애들 차트로 품게 하고말텝니다
