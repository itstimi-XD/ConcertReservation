# 부하 테스트 계획서

## 목차

1. [서론](#1-서론)
2. [테스트 대상 및 목적](#2-테스트-대상-및-목적)
    - [2.1 테스트 대상](#21-테스트-대상)
    - [2.2 테스트 목적](#22-테스트-목적)
3. [테스트 시나리오](#3-테스트-시나리오)
    - [3.1 잔액 조회 부하 테스트](#31-잔액-조회-부하-테스트)
    - [3.2 잔액 충전 부하 테스트](#32-잔액-충전-부하-테스트)
    - [3.3 좌석 예약 부하 테스트](#33-좌석-예약-부하-테스트)
    - [3.4 결제 처리 부하 테스트](#34-결제-처리-부하-테스트)
4. [수집할 지표](#4-수집할-지표)
5. [테스트 환경](#5-테스트-환경)
6. [테스트 일정](#6-테스트-일정)
7. [결론 및 기대 효과](#7-결론-및-기대-효과)
8. [참고 자료](#8-참고-자료)

---

## 1. 서론

본 문서는 시스템의 성능과 안정성을 검증하기 위한 부하 테스트 계획서입니다. 주요 API에 대한 부하 테스트를 통해 시스템의 최대 처리량을 확인하고, 응답 시간 및 에러율을 측정하여 병목 현상을 파악하고자 합니다. 이를 통해 시스템의 성능을 개선하고 사용자에게 안정적인 서비스를 제공하는 것을 목표로 합니다.

## 2. 테스트 대상 및 목적

### 2.1 테스트 대상

롸잇 나우 진행할 테스트 대상은 다음의  API입니다. 

1**잔액 조회**: `/api/users/balance`


### 2.2 테스트 목적

- **시스템 최대 처리량 확인**: 시스템이 처리할 수 있는 최대 요청 수를 파악합니다.
- **응답 시간 측정 및 백분위 분석**: 다양한 부하 상황에서의 응답 시간을 측정하고 분석합니다.
- **시스템 안정성 검증**: 부하 상황에서도 시스템이 안정적으로 동작하는지 검증합니다.
- **리소스 사용량 모니터링**: CPU, 메모리 등 시스템 자원의 사용량을 모니터링합니다.

## 3. 테스트 시나리오

### 3.1 잔액 조회 부하 테스트

- **목적**: 다수의 사용자가 동시에 잔액을 조회할 때 시스템의 성능을 검증합니다.
- **시나리오 상세**:
    - **사용자 수**: 1,000명
    - **부하 패턴**:
        - **Ramp-up 시간**: 1분 동안 가상 사용자(VU)를 1,000명까지 증가
        - **유지 시간**: 5분 동안 VU를 1,000명으로 유지
        - **Ramp-down 시간**: 1분 동안 VU를 0명으로 감소
    - **측정 지표**:
        - 응답 시간(평균, 백분위수)
        - 에러율
        - 시스템 리소스 사용량


## 4. 수집할 지표

- **응답 시간**: 평균 응답 시간, 백분위수(p90, p95, p99)
- **처리량 (RPS)**: 초당 요청 수(Requests Per Second)
- **에러율**: 전체 요청 대비 실패한 요청의 비율
- **시스템 리소스 사용량**:
    - CPU 사용률
    - 메모리 사용량
    - 네트워크 I/O
- **시스템 오류 로그**: 애플리케이션 로그를 통해 오류 발생 여부 확인
- **GC 횟수 및 시간**: 가비지 컬렉션 발생 횟수와 소요 시간 (추후 진행 예정)

## 5. 테스트 환경

- **서버 스펙**:
    - MacBook Pro (Apple M1 Pro, 16GB RAM)
- **운영 체제**:
    - macOS Ventura 13.0.1
- **소프트웨어 환경**:
    - Java 17
    - k6 v0.45.0
    - Prometheus 2.46.0
    - Grafana 10.1.0
- **네트워크 환경**:
    - 로컬 환경에서 테스트 진행

## 6. 테스트 일정

- **테스트 준비**: 2024-11-28 ~ 
- **테스트 실행**: 2024-11-29 ~
- **결과 분석**: 2024-12-05 ~ 2024-12-06
- **보고서 작성 및 제출**: 2024-11-29

## 7. 결론 및 기대 효과

본 부하 테스트를 통해 시스템의 현재 성능 상태를 정확히 파악하는 것이 목표입니다. 테스트 결과를 바탕으로 시스템의 성능 최적화 방안을 마련하여 서비스 품질을 향상시킬 수 있을 것으로 기대됩니다.

## 8. 참고 자료

- [k6 Documentation](https://k6.io/docs/)
- [Prometheus Documentation](https://prometheus.io/docs/introduction/overview/)
- [Grafana Documentation](https://grafana.com/docs/)
- [부하 테스트 방법론](https://www.example.com/load-testing-methodology)

---

**작성자**: 김인후  
**작성일**: 2024-11-29